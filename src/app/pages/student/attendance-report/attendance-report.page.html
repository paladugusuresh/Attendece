<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content [fullscreen]="true" class="ion-padding-top">
  <ion-row>
    <ion-col>
      <h3 class="school-year">School Year</h3>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col>
      <ion-item>
        <ion-select interface="popover" *ngIf="academicYears && academicYears.length > 0" [(ngModel)]="academicId" (ionChange)="onAcademicYearChange($event)" class="academic-year"
          placeholder="Select School Year" [mode]="'ios'" >
          <ion-select-option [value]="academicYear.id" *ngFor="let academicYear of academicYears">{{academicYear.schoolYear}}</ion-select-option>
        </ion-select>
      </ion-item>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col>
      <ion-label>
        <h2><i class="attended-border">#</i>&nbsp; Attended</h2>
        <h2><i class="holiday-border">#</i>&nbsp; Non School Day/Student Not Registered</h2>
        <h2><i class="unexcused-absence-border">#</i>&nbsp; Unexcused Absence</h2>
      </ion-label>
    </ion-col>
  </ion-row>
  <ion-row *ngIf="attendanceHistory && attendanceHistory.length > 0">
    <ion-col class="pt-1">
      <ion-calendar [(ngModel)]="calendarDate"
      (monthChange)="onDateChange($event)"
      [options]="calendarOptions"
      [type]="calenderDateType"
      [format]="'YYYY-MM-DD'">
    </ion-calendar>
    </ion-col>
  </ion-row>
  <!-- <ion-row>
    <ion-col size="12">
      <canvas baseChart width="400" height="400" [datasets]="lineChartData" [labels]="lineChartLabels"
        [options]="lineChartOptions" [colors]="lineChartColors" [legend]="lineChartLegend" [chartType]="'line'"
        [plugins]="lineChartPlugins" (chartClick)="chartClicked($event)">
      </canvas>
    </ion-col>
  </ion-row> -->
  <!-- <ion-row>
    <ion-col size="12" *ngFor="let course of courses">
      <ion-card>
        <ion-card-header>
          <ion-item lines="none">
            <ion-label>
              <h2 class="box-title">{{course.name}}</h2>
              <h2 class="box-sub-title"><strong>Average Attendance:</strong> {{course.avgAttendance}}%</h2>
            </ion-label>
            <ion-icon slot="end" name="chevron-down-outline" *ngIf="!course.isExpandable" (click)="expandPanel(course)">
            </ion-icon>
            <ion-icon slot="end" name="chevron-up-outline" *ngIf="course.isExpandable" (click)="collapsePanel(course)">
            </ion-icon>
          </ion-item>
        </ion-card-header>
        <ion-card-content *ngIf="course.isExpandable">
          <ion-row>
            <ion-col *ngIf="attendanceHistory.length > 0">
              <ion-list>
                <ion-item *ngFor="let history of attendanceHistory; let index = index"
                  [lines]="index+1 === attendanceHistory.length ? 'none' : 'full'">
                  <ion-label class="label label-title">
                    <p>{{ history.attendedDate | date: 'MM/dd/YYYY'}}</p>
                    <h2>{{ history.course }}</h2>
                  </ion-label>
                  <ion-toggle slot="end" color="success" [(ngModel)]="history.isAcknowledged" disabled="true"
                    [checked]="history.isAcknowledged"></ion-toggle>
                </ion-item>
              </ion-list>
            </ion-col>
            <ion-col *ngIf="attendanceHistory.length === 0">
              <p class="empty-data">
                No data available
              </p>
            </ion-col>
          </ion-row>
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row> -->
  <ion-row>
    <ion-col size="12">
      <ion-card class="attendance-card">
        <ion-card-content>
          <ion-item>
            <ion-label slot="start">
              <h2 class="grade-card-heading">Attendance</h2>
              <h1 class="grade-card-content">{{attendancePercent}}%</h1>
            </ion-label>
            <ion-label slot="end" class="mlt">
              <p>Total Days: {{totalDays}}</p>
              <p>Present: {{daysPresent}}</p>
              <p>Absent: {{daysAbsent}}</p>
            </ion-label>
          </ion-item>
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>
</ion-content>