<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content [fullscreen]="true" class="ion-padding-top">
  <ion-row>
    <ion-col size="12">
      <canvas baseChart width="400" height="400" [datasets]="lineChartData" [labels]="lineChartLabels"
        [options]="lineChartOptions" [colors]="lineChartColors" [legend]="lineChartLegend" [chartType]="'line'"
        [plugins]="lineChartPlugins" (chartClick)="chartClicked($event)">
      </canvas>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col size="12" *ngFor="let course of courses">
      <ion-card>
        <ion-card-header>
          <ion-item lines="none">
            <ion-label>
              <h2 class="box-title">{{course.name}}</h2>
              <h2 class="box-sub-title"><strong>Average Attendance:</strong> {{course.avgAttendance}}%</h2>
            </ion-label>
            <ion-icon slot="end" name="chevron-down-outline" *ngIf="!course.isExpandable" (click)="expandPanel(course)">
            </ion-icon>
            <ion-icon slot="end" name="chevron-up-outline" *ngIf="course.isExpandable" (click)="collapsePanel(course)">
            </ion-icon>
          </ion-item>
        </ion-card-header>
        <ion-card-content *ngIf="course.isExpandable">
          <ion-row>
            <ion-col *ngIf="attendanceHistory.length > 0">
              <ion-list>
                <ion-item *ngFor="let history of attendanceHistory; let index = index"
                  [lines]="index+1 === attendanceHistory.length ? 'none' : 'full'">
                  <ion-label class="label label-title">
                    <p>{{ history.attendedDate | date: 'MM/dd/YYYY'}}</p>
                    <h2>{{ history.course }}</h2>
                  </ion-label>
                  <ion-toggle slot="end" color="success" [(ngModel)]="history.isAcknowledged" disabled="true"
                    [checked]="history.isAcknowledged"></ion-toggle>
                </ion-item>
              </ion-list>
            </ion-col>
            <ion-col *ngIf="attendanceHistory.length === 0">
              <p class="empty-data">
                No data available
              </p>
            </ion-col>
          </ion-row>
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>
</ion-content>